{% extends "base.html" %}
{% load static %}

{% block title %}ุณุฑุงูุช - ุชูุงุดุง ุขููุงู ููู ู ุณุฑุงู{% endblock title %}

{% block extra_css %}
<link rel="stylesheet" href="{% static "web/css/home_extra.css" %}">
{% endblock %}

{% block content %}
    <!-- Mobile Menu -->
    <div class="offcanvas offcanvas-start d-lg-none" tabindex="-1" id="offcanvasNavbar">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title">ููู</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body">
            <ul class="navbar-nav">
                <li class="nav-item"><a href="#" class="nav-link active">ุฎุงูู</a></li>
                <li class="nav-item"><a href="#" class="nav-link">ูููโูุง</a></li>
                <li class="nav-item"><a href="#" class="nav-link">ุณุฑุงูโูุง</a></li>
                <li class="nav-item"><a href="#" class="nav-link">ุฏุณุชูโุจูุฏโูุง</a></li>
                <li class="nav-item"><a href="#" class="nav-link">ุชูุงุดุงุฎุงูู</a></li>
                <li class="nav-item"><a href="#" class="nav-link">ููุงูุงุช</a></li>
            </ul>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1 class="fade-in-up">ุจูุชุฑู ุชุฌุฑุจู ุชูุงุดุง ููู ู ุณุฑุงู</h1>
            <p class="fade-in-up">ุจุง ุณุฑุงูุช ุจู ุฏูุง ุจโูพุงุงู ูููโูุง ู ุณุฑุงูโูุง ุณูุฑ ฺฉูุฏ. ูุฒุงุฑุงู ุนููุงู ุฌุฐุงุจ ุจุง ฺฉูุช ุจุงูุง ุฏุฑ ุงูุชุธุงุฑ ุดูุงุณุช.</p>
            <div class="fade-in-up">
                <a href="{% url "web:all" %}" class="btn btn-primary me-3">ุดุฑูุน ุชูุงุดุง <i class="fas fa-play ms-2"></i></a>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="py-5">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">ุฏุณุชูโุจูุฏโูุง</h2>
                <a href="#" class="view-all">ูุดุงูุฏู ููู <i class="fas fa-arrow-left ms-2"></i></a>
            </div>
            <div class="row g-4">
                {% for c in cate %}
                <div class="col-lg-3 col-md-4 col-sm-6">
                    <a style="color: white; text-decoration: none;" class="category_link" href="{% url "web:category" c.id %}">
                    <div class="category-card fade-in-up">
                        <div class="category-img" style="background-image: url('{{c.image.url}}');"></div>
                        <div class="category-content">
                            <h3 class="category-title">{{c.name}}</h3>
                            <p class="category-desc">{{c.descriptions|truncatewords:11}}</p>
                            <span class="movie-badge">{{c.movie_count}} ูุตู</span>
                        </div>
                    </div>
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Featured Section -->
    <section class="featured-section">
        <div class="featured-bg"></div>
        {% for s in fe %}
        <div class="container">
            <div class="featured-content">
                <div class="featured-poster fade-in-up">
                    <img src="{{s.pictrue.url}}" alt="ููู ูฺู">
                </div>
                <div class="featured-info fade-in-up">
                    <div class="featured-badges">
                        <span class="featured-badge">ุฌุฏุฏ</span>
                        <span class="featured-badge">ูพุฑุจุงุฒุฏุฏ</span>
                        <span class="featured-badge">IMDB {{s.imdb_rate|truncatechars:4}}</span>
                    </div>
                    <h1 class="featured-title">{{s.name}}</h1>
                    <div class="featured-meta">
                        <div class="featured-meta-item">
                            <i class="fas fa-calendar-alt"></i>
                            <span>{{s.created_at}}</span>
                        </div>
                        <div class="featured-meta-item">
                            <i class="fas fa-clock"></i>
                            <span>ฑดต ุฏููู</span>
                        </div>
                        <div class="featured-meta-item">
                            <i class="fas fa-tag"></i>
                            <span>{{s.category}}</span>
                        </div>
                    </div>
                    <p class="featured-desc">{{s.decriptions}}</p>
                    <div class="featured-actions">
                        <a href="{% url "web:detail" s.id %}" class="btn btn-primary">ุชูุงุดุง ฺฉูุฏ <i class="fas fa-play ms-2"></i></a>
                        
                        <!-- ุฏฺฉูู ุนูุงููโููุฏ ุจุฑุง ููู ูฺู -->
                        <button class="btn btn-outline-primary favorite-btn {% if s.is_favorited_by_user %}favorited{% endif %}" 
                                data-movie-id="{{ s.id }}"
                                data-toggle-url="{% url 'accounts:toggle_favorite' s.id %}"
                                {% if not user.is_authenticated %}disabled title="ุจุฑุง ุงูุฒูุฏู ุจู ุนูุงููโููุฏโูุง ูุงุฑุฏ ุดูุฏ"{% endif %}>
                            <i class="{% if s.is_favorited_by_user %}fas{% else %}far{% endif %} fa-heart"></i>
                        </button>
                        
                        <button class="btn btn-outline-primary"><i class="fas fa-plus"></i></button>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </section>

    <!-- Movies Section -->
    <section class="py-5 bg-dark">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">ูููโูุง ูพุฑุจุงุฒุฏุฏ</h2>
                <a href="#" class="view-all">ูุดุงูุฏู ููู <i class="fas fa-arrow-left ms-2"></i></a>
            </div>
            <div class="owl-carousel owl-theme">
                {% for m in movie %}
                <div class="item">
                    <div class="movie-card">
                        <div class="movie-poster" style="background-image: url('{{m.pictrue.url}}');">
                            {% if m.created_at >= 2025 %}
                            <span class="movie-badge new">ุฌุฏุฏ</span>
                            {% endif %}
                            <div class="movie-actions">
                                <!-- ุฏฺฉูู ุนูุงููโููุฏ -->
                                <button class="movie-action-btn favorite-btn {% if m.is_favorited_by_user %}favorited{% endif %}" 
                                        data-movie-id="{{ m.id }}"
                                        data-toggle-url="{% url 'accounts:toggle_favorite' m.id %}"
                                        {% if not user.is_authenticated %}disabled title="ุจุฑุง ุงูุฒูุฏู ุจู ุนูุงููโููุฏโูุง ูุงุฑุฏ ุดูุฏ"{% endif %}>
                                    <i class="{% if m.is_favorited_by_user %}fas{% else %}far{% endif %} fa-heart"></i>
                                </button>
                                
                                <button class="movie-action-btn"><i class="fas fa-plus"></i></button>
                                <button class="movie-action-btn"><i class="fas fa-share-alt"></i></button>
                                <button class="movie-action-btn like-btn {% if m.is_liked_by_user %}liked{% endif %}" data-movie-id="{{ m.id }}">
                                    <i class="{% if m.is_liked_by_user %}fas{% else %}far{% endif %} fa-heart"></i> 
                                    <span class="likes-count">{{ m.like_counts }}</span>
                                </button>
                            </div>
                        </div>
                        <div class="movie-content">
                            <h3 class="movie-title">{{m.name}}</h3>
                            <div class="movie-meta">
                                <span>{{m.created_at}}</span>
                                <span class="movie-rating"><i class="fas fa-star"></i> {{m.imdb_rate|truncatechars:4}} IMDB</span>
                            </div>
                            <div class="movie-tags">
                                <span class="movie-tag">{{m.category}}</span>
                                <span class="movie-tag">ูุฌุงูโุงูฺฏุฒ</span>
                            </div>
                            <p class="movie-desc">{{m.decriptions}}</p>
                            <a href="{% url "web:detail" m.id %}" class="btn btn-primary w-100">ุชูุงุดุง ฺฉูุฏ</a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Series Section -->
    <section class="py-5">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">ุณุฑุงูโูุง ูุญุจูุจ</h2>
                <a href="{% url "web:popular_series" %}" class="view-all">ูุดุงูุฏู ููู <i class="fas fa-arrow-left ms-2"></i></a>
            </div>
            <div class="row g-4">
                {% for b in ps %}
                {% if b.imdb_rate >= 8 %}
                <div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="movie-card fade-in-up">
                        <div class="movie-poster" style="background-image: url('{{b.pictrue.url}}');">
                            <span class="movie-badge">{{b.season_number}} ูุตู</span>
                            <div class="movie-actions">
                                <!-- ุฏฺฉูู ุนูุงููโููุฏ -->
                                <button class="movie-action-btn favorite-btn {% if b.is_favorited_by_user %}favorited{% endif %}" 
                                        data-movie-id="{{ b.id }}"
                                        data-toggle-url="{% url 'accounts:toggle_favorite' b.id %}"
                                        {% if not user.is_authenticated %}disabled title="ุจุฑุง ุงูุฒูุฏู ุจู ุนูุงููโููุฏโูุง ูุงุฑุฏ ุดูุฏ"{% endif %}>
                                    <i class="{% if b.is_favorited_by_user %}fas{% else %}far{% endif %} fa-heart"></i>
                                </button>
                                
                                <button class="movie-action-btn"><i class="fas fa-plus"></i></button>
                                <button class="movie-action-btn"><i class="fas fa-share-alt"></i></button>
                            </div>
                        </div>
                        <div class="movie-content">
                            <h3 class="movie-title">{{b.name}}</h3>
                            <div class="movie-meta">
                                <span>ูุตู {{b.season_number}}</span>
                                <span class="movie-rating"><i class="fas fa-star"></i>{{b.imdb_rate|truncatechars:4}} IMDB</span>
                            </div>
                            <div class="movie-tags">
                                <span class="movie-tag">{{b.category}}</span>
                                <span class="movie-tag">ูุฌุงูโุงูฺฏุฒ</span>
                            </div>
                            <p class="movie-desc">{{b.decriptions}}</p>
                            <a href="{% url "web:detail" b.id %}" class="btn btn-primary w-100">ุชูุงุดุง ฺฉูุฏ</a>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </section>

<hr>

    <!-- Movies Section -->
    <section class="py-5">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">ููู ูุญุจูุจ</h2>
                <a href="{% url "web:popular_movies" %}" class="view-all">ูุดุงูุฏู ููู <i class="fas fa-arrow-left ms-2"></i></a>
            </div>
            <div class="row g-4">
                {% for b in pm %}
                {% if b.imdb_rate >= 8 %}
                <div class="col-lg-3 col-md-4 col-sm-6">
                    <div class="movie-card fade-in-up">
                        <div class="movie-poster" style="background-image: url('{{b.pictrue.url}}');">
                            <span class="movie-badge">ุณููุง</span>
                            <div class="movie-actions">
                                <!-- ุฏฺฉูู ุนูุงููโููุฏ -->
                                <button class="movie-action-btn favorite-btn {% if b.is_favorited_by_user %}favorited{% endif %}" 
                                        data-movie-id="{{ b.id }}"
                                        data-toggle-url="{% url 'accounts:toggle_favorite' b.id %}"
                                        {% if not user.is_authenticated %}disabled title="ุจุฑุง ุงูุฒูุฏู ุจู ุนูุงููโููุฏโูุง ูุงุฑุฏ ุดูุฏ"{% endif %}>
                                    <i class="{% if b.is_favorited_by_user %}fas{% else %}far{% endif %} fa-heart"></i>
                                </button>
                                
                                <button class="movie-action-btn"><i class="fas fa-plus"></i></button>
                                <button class="movie-action-btn"><i class="fas fa-share-alt"></i></button>
                            </div>
                        </div>
                        <div class="movie-content">
                            <h3 class="movie-title">{{b.name}}</h3>
                            <div class="movie-meta">
                                <span>ูุตู {{b.season_number}}</span>
                                <span class="movie-rating"><i class="fas fa-star"></i>{{b.imdb_rate|truncatechars:4}} IMDB</span>
                            </div>
                            <div class="movie-tags">
                                <span class="movie-tag">{{b.category}}</span>
                                <span class="movie-tag">ูุฌุงูโุงูฺฏุฒ</span>
                            </div>
                            <p class="movie-desc">{{b.decriptions}}</p>
                            <a href="{% url "web:detail" b.id %}" class="btn btn-primary w-100">ุชูุงุดุง ฺฉูุฏ</a>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats-section">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-3 col-sm-6">
                    <div class="stat-card fade-in-up">
                        <div class="stat-icon">
                            <i class="fas fa-film"></i>
                        </div>
                        <div class="stat-number">ต,ฒดท</div>
                        <div class="stat-text">ููู ู ุณุฑุงู</div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="stat-card fade-in-up">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-number">ฑ,ฒตธ,ดณถ</div>
                        <div class="stat-text">ฺฉุงุฑุจุฑ ูุนุงู</div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="stat-card fade-in-up">
                        <div class="stat-icon">
                            <i class="fas fa-play-circle"></i>
                        </div>
                        <div class="stat-number">ฑธ,ตดท,ธนฒ</div>
                        <div class="stat-text">ุณุงุนุช ุชูุงุดุง</div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6">
                    <div class="stat-card fade-in-up">
                        <div class="stat-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-number">ด.ธ</div>
                        <div class="stat-text">ุงูุชุงุฒ ฺฉุงุฑุจุฑุงู</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Subscription Section -->
    <section class="subscription-section">
        <div class="container">
            <h2 class="section-title text-center">ูพููโูุง ุงุดุชุฑุงฺฉ</h2>
            <p class="text-center mb-5" style="color: var(--text-secondary); max-width: 700px; margin: 0 auto;">ุงุดุชุฑุงฺฉ ููุฑุฏ ูุธุฑ ุฎูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ ู ุงุฒ ุชูุงุดุง ููู ู ุณุฑุงู ุจุฏูู ูุญุฏูุฏุช ูุฐุช ุจุจุฑุฏ.</p>
            <div class="row g-4 justify-content-center">
                {% for s in su %}
                <div class="col-lg-4 col-md-6">
                    <div class="subscription-card fade-in-up">
                        <h3 class="subscription-title">{{s.time}}</h3>
                        <div class="subscription-price">{{s.price}} <span class="subscription-period">ุชููุงู / ูุงู</span></div>
                        <ul class="subscription-features">
                            <li><i class="fas fa-check"></i>{{s.otion1|truncatechars:71}}</li>
                        </ul>
                        <a href="#" class="btn btn-primary w-100">ุงูุชุฎุงุจ ูพูู</a>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials-section">
        <div class="container">
            <h2 class="section-title text-center">ูุธุฑุงุช ฺฉุงุฑุจุฑุงู</h2>
            <p class="text-center mb-5" style="color: var(--text-secondary); max-width: 700px; margin: 0 auto;">ูุธุฑุงุช ู ุชุฌุฑุจุงุช ฺฉุงุฑุจุฑุงู ุณุฑุงูุช ุฑุง ุจุฎูุงูุฏ</p>
            
            <div class="owl-carousel owl-theme">
                {% for com in co %}
                <div class="item">
                    <div class="testimonial-card">
                        <div class="testimonial-content">
                        {{com.text}}
                        </div>
                        <div class="testimonial-author">
                            <div class="testimonial-info">
                                <h4>{{com.user}}</h4>
                                <h4>{{com.movie}}</h4>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Blog Section -->
    <section class="blog-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">ุขุฎุฑู ููุงูุงุช</h2>
                <a href="{% url "web:post_blog" %}" class="view-all">ูุดุงูุฏู ููู <i class="fas fa-arrow-left ms-2"></i></a>
            </div>
            <div class="row g-4">
                {% for b in blog %}
                <a style="text-decoration: none ; color: white;" href="{% url "web:post_detail" b.id %}">
                <div class="col-md-4">
                    <div class="blog-card fade-in-up">
                        <div class="blog-image" style="background-image: url('{{b.image.url}}');">
                            <div class="blog-date">{{b.created|date}}</div>
                        </div>
                        <div class="blog-content">
                            <h3 class="blog-title">{{b.title}}</h3>
                            <p class="blog-excerpt">{{b.text}}</p>
                            <div class="blog-meta">
                                <span>ุชูุณุท {{b.author}}</span>
                            </div>
                        </div>
                    </div>
                </a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section">
        <div class="container">
            <h2 class="section-title text-center">ุณูุงูุงุช ูุชุฏุงูู</h2>
            <p class="text-center mb-5" style="color: var(--text-secondary); max-width: 700px; margin: 0 auto;">ูพุงุณุฎ ุจู ูพุฑุชฺฉุฑุงุฑุชุฑู ุณูุงูุงุช ฺฉุงุฑุจุฑุงู ุฏุฑุจุงุฑู ุณุฑุงูุช</p>
            
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="accordion" id="faqAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingOne">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                    ฺฺฏููู ูโุชูุงูู ุงุดุชุฑุงฺฉ ุจุฎุฑูุ
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    ุจุฑุง ุฎุฑุฏ ุงุดุชุฑุงฺฉุ ุงุจุชุฏุง ุฏุฑ ุณุงุช ุซุจุชโูุงู ฺฉูุฏ. ุณูพุณ ุงุฒ ุตูุญู ุงุตู ุฑู ุฏฺฉูู "ุฎุฑุฏ ุงุดุชุฑุงฺฉ" ฺฉูฺฉ ฺฉุฑุฏู ู ูพูู ููุฑุฏ ูุธุฑ ุฎูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ. ูพุณ ุงุฒ ูพุฑุฏุงุฎุช ููููุ ุงุดุชุฑุงฺฉ ุดูุง ูุนุงู ุฎูุงูุฏ ุดุฏ.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingTwo">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    ุขุง ูโุชูุงูู ูููโูุง ุฑุง ุฏุงูููุฏ ฺฉููุ
                                </button>
                            </h2>
                            <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    ุจููุ ฺฉุงุฑุจุฑุงู ุฏุงุฑุง ุงุดุชุฑุงฺฉ ุทูุง ู ูพูุงุชููู ูโุชูุงููุฏ ูููโูุง ู ุณุฑุงูโูุง ุฑุง ุจุฑุง ุชูุงุดุง ุขููุงู ุฏุงูููุฏ ฺฉููุฏ. ุงู ูุงุจูุช ุจุฑุง ุงุดุชุฑุงฺฉ ูพุงู ููุฌูุฏ ูุณุช.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingThree">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                    ุขุง ูุญุชูุง ุณุฑุงูุช ุฏุฑ ููู ฺฉุดูุฑูุง ุฏุฑ ุฏุณุชุฑุณ ุงุณุชุ
                                </button>
                            </h2>
                            <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    ุจููุ ุณุฑุงูุช ุฏุฑ ุณุฑุงุณุฑ ุฌูุงู ุฏุฑ ุฏุณุชุฑุณ ุงุณุช. ุจุง ุงู ุญุงูุ ููฺฉู ุงุณุช ุจุฑุฎ ูุญุชูุงูุง ุจู ุฏูู ูุญุฏูุฏุชโูุง ุฌุบุฑุงูุง ุฏุฑ ุจุฑุฎ ฺฉุดูุฑูุง ูุงุจู ุฏุณุชุฑุณ ูุจุงุดูุฏ.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingFour">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                    ฺฺฏููู ูโุชูุงูู ฺฉูุช ูุฏู ุฑุง ุชุบุฑ ุฏููุ
                                </button>
                            </h2>
                            <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    ุฏุฑ ุญู ูพุฎุด ูุฏูุ ุฑู ุขฺฉูู ุชูุธูุงุช (ฺุฑุฎ ุฏูุฏู) ฺฉูฺฉ ฺฉูุฏ ู ุงุฒ ููู ุจุงุฒ ุดุฏู ฺฉูุช ููุฑุฏ ูุธุฑ ุฎูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ. ฺฉูุช ูุงุจู ุงูุชุฎุงุจ ุจู ุณุฑุนุช ุงูุชุฑูุช ุดูุง ู ูพูู ุงุดุชุฑุงฺฉ ฺฉู ุฏุงุฑุฏ ุจุณุชฺฏ ุฏุงุฑุฏ.
                                </div>
                            </div>
                        </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingFive">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                                    ุขุง ูโุชูุงูู ุงุดุชุฑุงฺฉ ุฎูุฏ ุฑุง ุจู ุงุดุชุฑุงฺฉ ุจฺฏุฐุงุฑูุ
                                </button>
                            </h2>
                            <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    ุจุณุชู ุจู ูพูู ุงุดุชุฑุงฺฉ ุดูุงุ ุงูฺฉุงู ุชูุงุดุง ุฑู ฺูุฏ ุฏุณุชฺฏุงู ุจู ุตูุฑุช ููุฒูุงู ูุฌูุฏ ุฏุงุฑุฏ. ุงุดุชุฑุงฺฉ ูพุงู ููุท ุฑู ฺฉ ุฏุณุชฺฏุงูุ ุทูุง ุฑู ณ ุฏุณุชฺฏุงู ู ูพูุงุชููู ุฑู ต ุฏุณุชฺฏุงู ุจู ุตูุฑุช ููุฒูุงู ูุงุจู ุงุณุชูุงุฏู ุงุณุช.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Newsletter Section -->
    <section class="newsletter-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-6 text-center">
                    <h2 class="section-title">ุนุถูุช ุฏุฑ ุฎุจุฑูุงูู</h2>
                    <p class="mb-4" style="color: var(--text-secondary);">ุจุง ุนุถูุช ุฏุฑ ุฎุจุฑูุงููุ ุงุฒ ุฌุฏุฏุชุฑู ูููโูุงุ ุณุฑุงูโูุง ู ุชุฎููโูุง ูฺู ุจุง ุฎุจุฑ ุดูุฏ.</p>
                    <form class="newsletter-form">
                        <input type="email" class="newsletter-input" placeholder="ุขุฏุฑุณ ุงูู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ" required>
                        <button type="submit" class="btn btn-primary">ุนุถูุช</button>
                    </form>
                </div>
            </div>
        </div>
    </section>
{% endblock content %}

{% block extra_js %}
<script>
// JavaScript ุณุณุชู ุนูุงููโููุฏโูุง
class FavoriteManager {
    constructor() {
        this.initEventListeners();
    }

    initEventListeners() {
        // ฺฉูฺฉ ุฑู ุฏฺฉููโูุง ุนูุงููโููุฏ
        document.addEventListener('click', (e) => {
            const favoriteBtn = e.target.closest('.favorite-btn');
            if (favoriteBtn) {
                e.preventDefault();
                this.toggleFavorite(favoriteBtn);
            }
        });
    }

    isUserAuthenticated() {
        // ุจุฑุฑุณ ุงูฺฉู ฺฉุงุฑุจุฑ ูุงฺฏู ฺฉุฑุฏู
        return document.body.dataset.userAuthenticated === 'true';
    }

    async toggleFavorite(button) {
        if (!this.isUserAuthenticated()) {
            this.showNotification('ูุทูุงู ุจุฑุง ุงูุฒูุฏู ุจู ุนูุงููโููุฏโูุง ูุงุฑุฏ ุดูุฏ', 'warning');
            return;
        }

        const movieId = button.dataset.movieId;
        const url = button.dataset.toggleUrl;

        // ููุงุด ุญุงูุช ููุฏูฺฏ
        const originalHTML = button.innerHTML;
        button.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
        button.disabled = true;

        try {
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': this.getCSRFToken(),
                    'X-Requested-With': 'XMLHttpRequest'
                }
            });

            const data = await response.json();

            if (data.success) {
                // ุจูโุฑูุฒุฑุณุงู ุธุงูุฑ ุฏฺฉูู
                if (data.liked) {
                    button.classList.add('favorited');
                    button.innerHTML = '<i class="fas fa-heart"></i>';
                    this.showNotification('ุจู ุนูุงููโููุฏโูุง ุงุถุงูู ุดุฏ ๐', 'success');
                } else {
                    button.classList.remove('favorited');
                    button.innerHTML = '<i class="far fa-heart"></i>';
                    this.showNotification('ุงุฒ ุนูุงููโููุฏโูุง ุญุฐู ุดุฏ โค๏ธ', 'info');
                }
            } else {
                this.showNotification(data.error, 'error');
            }
        } catch (error) {
            console.error('Error toggling favorite:', error);
            this.showNotification('ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ', 'error');
            button.innerHTML = originalHTML;
        } finally {
            button.disabled = false;
        }
    }

    getCSRFToken() {
        const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]');
        return csrfToken ? csrfToken.value : '';
    }

    showNotification(message, type = 'info') {
        // ุญุฐู ููุชูฺฉุดูโูุง ูุจู
        const existingNotifications = document.querySelectorAll('.notification');
        existingNotifications.forEach(notif => notif.remove());

        // ุงุฌุงุฏ ููุชูฺฉุดู ุฌุฏุฏ
        const notification = document.createElement('div');
        const alertClass = type === 'error' ? 'alert-danger' : 
                          type === 'warning' ? 'alert-warning' : 
                          type === 'success' ? 'alert-success' : 'alert-info';
        
        notification.className = `alert ${alertClass} notification`;
        notification.innerHTML = `
            <div class="d-flex align-items-center">
                <i class="fas fa-${type === 'error' ? 'exclamation-triangle' : type === 'warning' ? 'exclamation-circle' : 'check-circle'} me-2"></i>
                <span>${message}</span>
            </div>
        `;
        
        document.body.appendChild(notification);
        
        // ุญุฐู ุฎูุฏฺฉุงุฑ ูพุณ ุงุฒ 4 ุซุงูู
        setTimeout(() => {
            notification.style.opacity = '0';
            notification.style.transition = 'opacity 0.5s ease';
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 500);
        }, 4000);
    }
}

// ููุฏุงุฑุฏู ุงููู ููุช DOM ููุฏ ุดุฏ
document.addEventListener('DOMContentLoaded', () => {
    new FavoriteManager();
    
    // ุงุถุงูู ฺฉุฑุฏู data attribute ุจุฑุง ูุถุนุช ฺฉุงุฑุจุฑ
    document.body.setAttribute('data-user-authenticated', '{{ user.is_authenticated|lower }}');
});
</script>

{% endblock %}